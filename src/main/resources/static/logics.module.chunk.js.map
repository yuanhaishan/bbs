{"version":3,"sources":["/home/riven/Documents/oschina/ng-alain/src/app/routes/logics/acl/acl.component.html","/home/riven/Documents/oschina/ng-alain/src/app/routes/logics/acl/acl.component.ts","/home/riven/Documents/oschina/ng-alain/src/app/routes/logics/downfile/downfile.component.html","/home/riven/Documents/oschina/ng-alain/src/app/routes/logics/downfile/downfile.component.ts","/home/riven/Documents/oschina/ng-alain/src/app/routes/logics/guard/admin.component.ts","/home/riven/Documents/oschina/ng-alain/src/app/routes/logics/guard/auth.component.ts","/home/riven/Documents/oschina/ng-alain/src/app/routes/logics/guard/can-admin.provide.ts","/home/riven/Documents/oschina/ng-alain/src/app/routes/logics/guard/can-auth.provide.ts","/home/riven/Documents/oschina/ng-alain/src/app/routes/logics/guard/can-leave.provide.ts","/home/riven/Documents/oschina/ng-alain/src/app/routes/logics/guard/guard.component.html","/home/riven/Documents/oschina/ng-alain/src/app/routes/logics/guard/guard.component.ts","/home/riven/Documents/oschina/ng-alain/src/app/routes/logics/guard/leave.component.ts","/home/riven/Documents/oschina/ng-alain/src/app/routes/logics/guard/user.service.ts","/home/riven/Documents/oschina/ng-alain/src/app/routes/logics/logics.module.ts"],"names":[],"mappings":"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","file":"logics.module.chunk.js","sourcesContent":["module.exports = \"<div class=\\\"content__title\\\">\\r\\n    <h1>\\r\\n        ACL 访问控制 <small>注意观察左边的菜单；ACLService提供一个完整的基于角色的访问控制的服务，若需要支持路由守卫，请配合ACLService与Route Guard配合简便实现。</small>\\r\\n    </h1>\\r\\n</div>\\r\\n<div nz-row [nzGutter]=\\\"8\\\">\\r\\n    <div nz-col [nzSpan]=\\\"8\\\">\\r\\n        <nz-card>\\r\\n            <ng-template #title>全量</ng-template>\\r\\n            <ng-template #body>\\r\\n                <button nz-button (click)=\\\"toggleFull()\\\">\\r\\n                    <span>{{ full ? '离开' : '设置'}}权限</span>\\r\\n                </button>\\r\\n                <p class=\\\"pt-md\\\">全量类指系统管理员角色，无任何受限。</p>\\r\\n            </ng-template>\\r\\n        </nz-card>\\r\\n    </div>\\r\\n    <div nz-col [nzSpan]=\\\"8\\\">\\r\\n        <nz-card>\\r\\n            <ng-template #title>角色[role-a]</ng-template>\\r\\n            <ng-template #body>\\r\\n                <button nz-button (click)=\\\"toggleRoleA()\\\">\\r\\n                    <span>{{ roleA.length > 0 ? '离开' : '设置'}}权限</span>\\r\\n                </button>\\r\\n            </ng-template>\\r\\n        </nz-card>\\r\\n    </div>\\r\\n    <div nz-col [nzSpan]=\\\"8\\\">\\r\\n        <nz-card>\\r\\n            <ng-template #title>角色[role-b]</ng-template>\\r\\n            <ng-template #body>\\r\\n                <button nz-button (click)=\\\"toggleRoleB()\\\">\\r\\n                    <span>{{ roleB.length > 0 ? '离开' : '设置'}}权限</span>\\r\\n                </button>\\r\\n            </ng-template>\\r\\n        </nz-card>\\r\\n    </div>\\r\\n</div>\\r\\n\\r\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// /home/riven/Documents/oschina/ng-alain/src/app/routes/logics/acl/acl.component.html\n// module id = ../../../../../src/app/routes/logics/acl/acl.component.html\n// module chunks = logics.module","import { Component } from '@angular/core';\r\nimport { MenuService } from '@core/services/menu.service';\r\nimport { ACLService } from '@core/acl/acl.service';\r\n\r\n@Component({\r\n    selector: 'app-acl',\r\n    templateUrl: './acl.component.html'\r\n})\r\nexport class ACLComponent {\r\n\r\n    full = true;\r\n    roleA = '';\r\n    roleB = '';\r\n\r\n    constructor(\r\n        private aclService: ACLService,\r\n        private menuSrv: MenuService) { }\r\n\r\n    toggleFull() {\r\n        this.full = !this.full;\r\n        this.aclService.setFull(this.full);\r\n        this.menuSrv.resume();\r\n    }\r\n\r\n    toggleRoleA() {\r\n        this.full = false;\r\n        this.roleA = this.roleA.length > 0 ? '' : 'role-a';\r\n        this.aclService.setFull(this.full);\r\n        this.aclService.setRole([this.roleA]);\r\n        this.menuSrv.resume();\r\n    }\r\n\r\n    toggleRoleB() {\r\n        this.full = false;\r\n        this.roleB = this.roleB.length > 0 ? '' : 'role-b';\r\n        this.aclService.setFull(this.full);\r\n        this.aclService.setRole([this.roleB]);\r\n        this.menuSrv.resume();\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// /home/riven/Documents/oschina/ng-alain/src/app/routes/logics/acl/acl.component.ts","module.exports = \"<div class=\\\"content__title\\\">\\n    <h1>Download a file</h1>\\n</div>\\n<nz-card>\\n    <ng-template #title>DEMO</ng-template>\\n    <ng-template #body>\\n        <button nz-button *ngFor=\\\"let i of fileTypes\\\" class=\\\"mr-sm\\\"\\n            down-file [http-data]=\\\"data\\\" http-url=\\\"assets/demo{{i}}\\\" file-name=\\\"demo中文\\\">{{i}}</button>\\n    </ng-template>\\n</nz-card>\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// /home/riven/Documents/oschina/ng-alain/src/app/routes/logics/downfile/downfile.component.html\n// module id = ../../../../../src/app/routes/logics/downfile/downfile.component.html\n// module chunks = logics.module","import { Component } from '@angular/core';\n\n@Component({\n    selector: 'app-down-file',\n    templateUrl: './downfile.component.html'\n})\nexport class DownFileComponent {\n\n    fileTypes = ['.xlsx', '.docx', '.pptx', '.pdf'];\n\n    data = {\n        otherdata: 1,\n        time: new Date()\n    };\n\n}\n\n\n\n// WEBPACK FOOTER //\n// /home/riven/Documents/oschina/ng-alain/src/app/routes/logics/downfile/downfile.component.ts","import { Component } from '@angular/core';\r\n\r\n@Component({\r\n    selector: 'app-guard-admin',\r\n    template: `\r\n    <p>这是一个管理员页面</p>\r\n    `\r\n})\r\nexport class GuardAdminComponent {}\r\n\n\n\n// WEBPACK FOOTER //\n// /home/riven/Documents/oschina/ng-alain/src/app/routes/logics/guard/admin.component.ts","import { Component } from '@angular/core';\r\n\r\n@Component({\r\n    selector: 'app-guard-auth',\r\n    template: `\r\n    <p>这是一个需要登录以后页面</p>\r\n    `\r\n})\r\nexport class GuardAuthComponent {}\r\n\n\n\n// WEBPACK FOOTER //\n// /home/riven/Documents/oschina/ng-alain/src/app/routes/logics/guard/auth.component.ts","import { NzMessageService } from 'ng-zorro-antd';\r\nimport { Injectable } from '@angular/core';\r\nimport { CanActivate, ActivatedRouteSnapshot, RouterStateSnapshot } from '@angular/router';\r\nimport { Observable } from 'rxjs/Observable';\r\nimport { UserService } from './user.service';\r\n\r\n@Injectable()\r\nexport class CanAdminProvide implements CanActivate {\r\n\r\n    constructor(private userSrv: UserService, private msg: NzMessageService) {}\r\n\r\n    canActivate(\r\n        route: ActivatedRouteSnapshot,\r\n        state: RouterStateSnapshot): boolean | Observable<boolean> | Promise<boolean> {\r\n        return new Observable((observer) => {\r\n            if (this.userSrv.hasRole('admin')) {\r\n                observer.next(true);\r\n                observer.complete();\r\n                return;\r\n            }\r\n\r\n            this.msg.error('授权不足');\r\n            observer.next(false);\r\n            observer.complete();\r\n        });\r\n    }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// /home/riven/Documents/oschina/ng-alain/src/app/routes/logics/guard/can-admin.provide.ts","import { Injectable } from '@angular/core';\r\nimport { CanActivate, ActivatedRouteSnapshot, RouterStateSnapshot } from '@angular/router';\r\nimport { Observable } from 'rxjs/Observable';\r\nimport { UserService } from './user.service';\r\nimport { NzMessageService } from 'ng-zorro-antd';\r\n\r\n@Injectable()\r\nexport class CanAuthProvide implements CanActivate {\r\n\r\n    constructor(private userSrv: UserService, private msg: NzMessageService) {}\r\n\r\n    canActivate(\r\n        route: ActivatedRouteSnapshot,\r\n        state: RouterStateSnapshot): boolean | Observable<boolean> | Promise<boolean> {\r\n        return new Observable((observer) => {\r\n            if (this.userSrv.isLogin) {\r\n                observer.next(true);\r\n                observer.complete();\r\n                return;\r\n            }\r\n\r\n            this.msg.error('请先登录');\r\n            observer.next(false);\r\n            observer.complete();\r\n        });\r\n    }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// /home/riven/Documents/oschina/ng-alain/src/app/routes/logics/guard/can-auth.provide.ts","import { Injectable } from '@angular/core';\r\nimport { CanDeactivate, ActivatedRouteSnapshot, RouterStateSnapshot } from '@angular/router';\r\nimport { GuardComponent } from './guard.component';\r\nimport { Observable } from 'rxjs/Observable';\r\nimport { NzModalService } from 'ng-zorro-antd';\r\n\r\n@Injectable()\r\nexport class CanLeaveProvide implements CanDeactivate<GuardComponent> {\r\n    constructor (private confirmSrv: NzModalService) {}\r\n\r\n    canDeactivate(\r\n        component: GuardComponent,\r\n        currentRoute: ActivatedRouteSnapshot,\r\n        currentState: RouterStateSnapshot,\r\n        nextState?: RouterStateSnapshot): boolean | Observable<boolean> | Promise<boolean> {\r\n        return new Observable((observer) => {\r\n            this.confirmSrv.confirm({\r\n                title: '确认要离开吗？',\r\n                content: '你已经填写了部分表单离开会放弃已经填写的内容。',\r\n                okText: '离开',\r\n                cancelText: '取消',\r\n                onOk: () => {\r\n                    observer.next(true);\r\n                    observer.complete();\r\n                },\r\n                onCancel: () => {\r\n                    observer.next(false);\r\n                    observer.complete();\r\n                }\r\n            });\r\n        });\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// /home/riven/Documents/oschina/ng-alain/src/app/routes/logics/guard/can-leave.provide.ts","module.exports = \"<div class=\\\"content__title\\\">\\r\\n    <h1>\\r\\n        路由守卫\\r\\n    </h1>\\r\\n</div>\\r\\n<nz-button-group>\\r\\n    <button nz-button [routerLink]=\\\"['/logics/guard/leave']\\\">\\r\\n        <span>离开确认页</span>\\r\\n    </button>\\r\\n    <button nz-button [routerLink]=\\\"['/logics/guard/auth']\\\">\\r\\n        <span>需要授权页</span>\\r\\n    </button>\\r\\n    <button nz-button [routerLink]=\\\"['/logics/guard/admin']\\\">\\r\\n        <span>需要管理角色页</span>\\r\\n    </button>\\r\\n</nz-button-group>\\r\\n<nz-button-group>\\r\\n    <button nz-button (click)=\\\"toggleLogin()\\\">\\r\\n        <span>设置【{{ userSrv.isLogin ? '未' : '已' }}登录】</span>\\r\\n    </button>\\r\\n    <button nz-button (click)=\\\"toggleRule()\\\">\\r\\n        <span>设置【{{ !userSrv.hasRole('admin') ? '管理员' : '员工' }}】</span>\\r\\n    </button>\\r\\n</nz-button-group>\\r\\n<p class=\\\"mb-lg\\\">\\r\\n    登录状态：{{ userSrv.isLogin ? '已' : '未' }}登录<br>\\r\\n    角色：{{ userSrv.hasRole('admin') ? '管理员' : '员工' }}\\r\\n</p>\\r\\n<router-outlet></router-outlet>\\r\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// /home/riven/Documents/oschina/ng-alain/src/app/routes/logics/guard/guard.component.html\n// module id = ../../../../../src/app/routes/logics/guard/guard.component.html\n// module chunks = logics.module","import { Router } from '@angular/router';\r\nimport { UserService } from './user.service';\r\nimport { NzMessageService } from 'ng-zorro-antd';\r\nimport { Component } from '@angular/core';\r\n\r\n@Component({\r\n    selector: 'app-guard',\r\n    templateUrl: './guard.component.html'\r\n})\r\nexport class GuardComponent {\r\n    constructor(public userSrv: UserService, private router: Router) {}\r\n\r\n    toggleLogin() {\r\n        if (this.userSrv.isLogin) {\r\n            this.userSrv.logout();\r\n        } else {\r\n            this.userSrv.login('admin');\r\n        }\r\n\r\n        this.router.navigate([ '/logics/guard' ]);\r\n    }\r\n\r\n    toggleRule() {\r\n        if (this.userSrv.hasRole('admin')) {\r\n            this.userSrv.login('employee');\r\n        } else {\r\n            this.userSrv.login('admin');\r\n        }\r\n\r\n        this.router.navigate([ '/logics/guard' ]);\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// /home/riven/Documents/oschina/ng-alain/src/app/routes/logics/guard/guard.component.ts","import { Component } from '@angular/core';\r\n\r\n@Component({\r\n    selector: 'app-guard-leave',\r\n    template: `\r\n    <p>离开时需要确认</p>\r\n    <button nz-button [nzType]=\"'primary'\" [routerLink]=\"['/logics/guard']\">\r\n        <span>我要离开</span>\r\n    </button>\r\n    `\r\n})\r\nexport class GuardLeaveComponent {}\r\n\n\n\n// WEBPACK FOOTER //\n// /home/riven/Documents/oschina/ng-alain/src/app/routes/logics/guard/leave.component.ts","import { Injectable } from '@angular/core';\r\n\r\n@Injectable()\r\nexport class UserService {\r\n\r\n    private _isLogin = false;\r\n\r\n    private _user = '';\r\n\r\n    private _role: string[] = [];\r\n\r\n    private _token = '';\r\n\r\n    get isLogin(): boolean {\r\n        return this._isLogin;\r\n    }\r\n\r\n    get token(): string {\r\n        return this._token;\r\n    }\r\n\r\n    hasRole(name: 'admin' | 'employee'): boolean {\r\n        return this._role.includes(name);\r\n    }\r\n\r\n    login(user: string) {\r\n        this._user = user;\r\n        // mock\r\n        if (user === 'admin') {\r\n            this._role = [ 'admin' ];\r\n        } else {\r\n            this._role = [ 'employee' ];\r\n        }\r\n        this._isLogin = true;\r\n        this._token = '' + Math.random();\r\n        console.log(user, this._isLogin, this._role);\r\n    }\r\n\r\n    logout() {\r\n        this._user = '';\r\n        this._isLogin = false;\r\n        this._token = '';\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// /home/riven/Documents/oschina/ng-alain/src/app/routes/logics/guard/user.service.ts","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport { SharedModule } from '@shared/shared.module';\r\n\r\nimport { GuardComponent } from './guard/guard.component';\r\nimport { CanLeaveProvide } from './guard/can-leave.provide';\r\nimport { UserService } from './guard/user.service';\r\nimport { CanAuthProvide } from './guard/can-auth.provide';\r\nimport { CanAdminProvide } from './guard/can-admin.provide';\r\nimport { GuardAdminComponent } from './guard/admin.component';\r\nimport { GuardAuthComponent } from './guard/auth.component';\r\nimport { GuardLeaveComponent } from './guard/leave.component';\r\nimport { ACLComponent } from './acl/acl.component';\r\nimport { DownFileComponent } from 'app/routes/logics/downfile/downfile.component';\r\n\r\nconst routes: Routes = [\r\n    {\r\n        path: 'guard',\r\n        component: GuardComponent,\r\n        children: [\r\n            { path: 'leave', component: GuardLeaveComponent, canDeactivate: [ CanLeaveProvide ] },\r\n            { path: 'auth', component: GuardAuthComponent, canActivate: [ CanAuthProvide ] },\r\n            { path: 'admin', component: GuardAdminComponent, canActivate: [ CanAdminProvide ] }\r\n        ]\r\n    },\r\n    { path: 'acl', component: ACLComponent },\r\n    { path: 'downfile', component: DownFileComponent }\r\n];\r\n\r\n@NgModule({\r\n    imports: [\r\n        SharedModule,\r\n        RouterModule.forChild(routes)\r\n    ],\r\n    providers: [ UserService, CanLeaveProvide, CanAuthProvide, CanAdminProvide ],\r\n    declarations: [\r\n        GuardComponent,\r\n        GuardLeaveComponent,\r\n        GuardAdminComponent,\r\n        GuardAuthComponent,\r\n        ACLComponent,\r\n        DownFileComponent\r\n    ],\r\n    exports: [\r\n        RouterModule\r\n    ]\r\n})\r\nexport class LogicsModule { }\r\n\n\n\n// WEBPACK FOOTER //\n// /home/riven/Documents/oschina/ng-alain/src/app/routes/logics/logics.module.ts"],"sourceRoot":"webpack:///"}